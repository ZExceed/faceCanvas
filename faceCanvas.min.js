(function(){var b=window.Zepto||window.jQuery;var a=function(c){this.options=b.extend({image:"",position:{},rectStyle:"rgba(255,0,255,0.7)",pointStyle:"rgba(255,0,127,0.7)",},c);if(!this.options.image||!this.options.position){return;}this.init();};a.prototype.init=function(){var c=this,d=b(this.options.container),f=b("<canvas/>")[0],g=f.getContext("2d"),e=new Image();e.crossOrigin="";e.src=this.options.image;this.img=e;this.canvas=f;this.context=g;this.container=d;d.append(f);e.onload=function(){c.draw(e);};};a.prototype.draw=function(){var k=this.container.width(),e=this.container.height(),m=this.img.width,j=this.img.height,l=this.options.position,o=Math.round((m*l.center.x/100)-(k/2)),n=Math.round((j*l.center.y/100)-(e/2));this.canvas.width=k;this.canvas.height=e;this.context.drawImage(this.img,o,n,k,e,0,0,k,e);var f=Math.round(m*l.width/100),p=Math.round(j*l.height/100),d=Math.round((k/2)-(f/2)),c=Math.round((e/2)-(p/2));this.context.beginPath();this.context.lineWidth=4;this.context.strokeStyle=this.options.rectStyle;this.context.rect(d,c,f,p);this.context.stroke();var h,g,i,r;i=r=6;for(var q in l){if(l.hasOwnProperty(q)&&q!=="center"&&l[q].x&&l[q].y){h=Math.round((m*l[q].x/100)-o-(i/2));g=Math.round((j*l[q].y/100)-n-(r/2));this.context.beginPath();this.context.fillStyle=this.options.pointStyle;this.context.fillRect(h,g,i,r);this.context.stroke();}}};b.fn.faceCanvas=function(c){return new a(b.extend({container:this},c));};})();